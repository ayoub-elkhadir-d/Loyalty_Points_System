{% extends 'layouts/base.twig' %}

{% block title %}Rewards Catalog - ShopEasy Loyalty{% endblock %}

{% block content %}
<div class="rewards-catalog">
    <div class="catalog-header">
        <h1>Rewards Catalog</h1>
        <div class="points-display">
            <span class="points-label">Your Points:</span>
            <span class="points-number">{{ currentPoints|number_format }}</span>
        </div>
    </div>
    
    <div class="rewards-grid">
        {% for reward in rewards %}
        <div class="reward-card-large">
            <div class="reward-header">
                <h3>{{ reward.name }}</h3>
                <div class="reward-points">
                    <span class="points-required">{{ reward.points_required|number_format }}</span>
                    <span class="points-label">POINTS</span>
                </div>
            </div>
            
            <div class="reward-body">
                <p class="reward-description">{{ reward.description }}</p>
                
                {% if reward.stock >= 0 %}
                    <div class="reward-stock">
                        <span class="stock-label">Available:</span>
                        <span class="stock-count">{{ reward.stock }}</span>
                    </div>
                {% else %}
                    <div class="reward-stock unlimited">
                        <span class="stock-label">Unlimited</span>
                    </div>
                {% endif %}
                
                <div class="reward-status">
                    {% if currentPoints >= reward.points_required %}
                        {% if reward.stock != 0 %}
                            <a href="/rewards/redeem/{{ reward.id }}" class="btn btn-success">
                                Redeem Now
                            </a>
                            <p class="status-available">You have enough points!</p>
                        {% else %}
                            <button class="btn btn-disabled" disabled>Out of Stock</button>
                        {% endif %}
                    {% else %}
                        <div class="points-needed">
                            <p>You need {{ (reward.points_required - currentPoints)|number_format }} more points</p>
                            <button class="btn btn-secondary" disabled>Not Enough Points</button>
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
</div>
{% endblock %}